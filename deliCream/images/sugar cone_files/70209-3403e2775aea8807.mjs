"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[70209],{344184:(e,t,n)=>{n.d(t,{Z:()=>r,v:()=>i});let i=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function r(){if(!i())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},54368:(e,t,n)=>{n.d(t,{o$:()=>i,ty:()=>r,uH:()=>a});let{Provider:i,MaybeConsumer:r,getMaybe:a}=(0,n(218291).Z)("inviteContext")},475065:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(667294),r=n(20256),a=n(20561),l=n(785893);let o=40,p=70,s={__style:{borderRadius:"4px",padding:"10px 14px"}},d={borderWidth:"1px",borderStyle:"solid",borderColor:"white"},u={__style:{borderRadius:"4px",padding:"10px 14px 9px 8px",whiteSpace:"nowrap"}},c=({accessibilityLabel:e,color:t,customStyles:n,forwardedRef:c,icon:m,inline:_=!1,minHeight:w=o,minWidth:h=p,onTouch:f,pressState:y,shape:v,text:g})=>{let[x,k]=(0,i.useState)(!1),b="transparent"===t||"dark"===t?"inverse":"primary"===t?"light":"default",Z=(({color:e,icon:t})=>t?u:"transparent"===e?{__style:{...s.__style,...d}}:s)({color:t,icon:m}),I=(0,l.jsx)(r.xu,{onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),position:"relative",children:(0,l.jsx)(r.xu,{color:"primary"===t&&x?"errorBase":t,dangerouslySetInlineStyle:"pill"===v?{__style:{borderRadius:"24px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"14px",paddingRight:"14px",...n}}:Z,display:_?"inlineBlock":"flex",justifyContent:"center",minHeight:w,minWidth:h,children:(0,l.jsxs)(r.kC,{alignItems:"center",justifyContent:"center",children:[m&&(0,l.jsx)(r.xu,{paddingX:2*("check"===m),children:(0,l.jsx)(r.JO,{accessibilityLabel:e,color:b,icon:m,inline:!0,size:"check"===m?16:20})}),(0,l.jsx)(r.xv,{color:b,inline:!0,lineClamp:1,size:"300",weight:"bold",children:g})]})})});return f?(0,l.jsx)(a.Z,{onTouch:f,pressState:y||"none",rounding:"pill"===v?"pill":2,children:(0,l.jsx)(r.xu,{ref:c,children:I})}):I}},270209:(e,t,n)=>{n.d(t,{M:()=>M,d:()=>N});var i=n(667294),r=n(616550),a=n(20256),l=n(547504),o=n(838380),p=n(344184),s=n(219308),d=n(297934),u=n(28760),c=n(890360),m=n(520949),_=n(174646),w=n(943369),h=n(756493),f=n(112800),y=n(140852),v=n(864548),g=n(859070),x=n(475065),k=n(712151),b=n(44041),Z=n(948694),I=n(611395),P=n(204682);let j=({children:e,external:t,externalQueryParams:n,target:i,href:a,features:l})=>{let o=(0,r.k6)();if(!a)return null;let p=(0,k.Z)(a);return e({navigate:e=>{e.preventDefault(),(0,I.Z)({url:p})||t?"undefined"!=typeof window&&window.Windows?(0,P.Z)(p):(0,Z.Z)(p,{queryParams:n,features:l}):(0,b.Z)({event:e,href:a,history:o,target:"blank"===i?"blank":null})}})};var R=n(785893),S=n(577404),C=n(869146),L=n(945011);let A="branchfallback",T=(0,i.lazy)(()=>Promise.all([n.e(97270),n.e(37447)]).then(n.bind(n,701230))),U=(e,t=!1)=>function({isAppUpsellDisabled:n,...x}){let{children:k,clientTrackingParams:b,deeplinkUri:Z,external:I,onTouch:P,refresh:j,to:U,viewParameter:M,viewType:N}=x,$=(0,v.Z)(),[D,W]=(0,i.useState)(!1),[O,B]=(0,i.useState)(!1),[F,J]=(0,i.useState)(!1),{isAuth:G}=(0,d.Z)(),{userAgent:{platform:z},locale:X}=(0,_.B)(),E=(0,L.Tt)(),H=(0,s.Z)(),{trackAppUpsellDismiss:V}=(0,g.Z)(),q=(0,r.TH)();(0,i.useEffect)(()=>{!async function(){(0,p.v)()&&(J(!0),(await (0,p.Z)()).length>0&&B(!0))}()},[]),(0,i.useEffect)(()=>{G||"true"===(0,h.Nl)().getItem(o.Vg)||((0,f.My)(`unauth.app_upsell.has_app.${O.toString()}`),(0,h.Nl)().setItem(o.Vg,"true"))},[O,G]);let Q=()=>{H({event_type:1701,view_type:N,view_parameter:M}),D&&W(!1)};return(0,R.jsxs)(a.xu,{"data-test-id":"deeplink-wrapper",children:[D&&(0,R.jsx)(i.Suspense,{children:(0,R.jsx)(T,{app_upsell_type:"deep-link-app-upsell-modal",clientTrackingParams:b,deepLinkUri:Z,isOpen:!0,onDismiss:()=>V({appUpsellType:"deep-link-app-upsell-modal",viewType:N,viewParameter:M,component:14157,element:10308}),onOpenInApp:()=>{(0,w.M0)().setItem(l.gm,A),Q()},shouldTrackDismiss:!0,to:U,viewParameter:M,viewType:N})}),(0,R.jsx)(S.Z,{children:i=>(0,R.jsx)(e,{...x,onTouch:e=>{let r=$&&!n&&G&&!I&&!j&&!(0,m.FP)(window)&&!("ios"===z&&(X||"").startsWith("ar"))&&(0,C.kp)((0,u.Z)(E?.created_at));if(r){let t=!0,n=!1;"string"==typeof Z&&(Z||"").startsWith("/pin/")&&((0,c.uM)(q)||(0,c.am)(q)||(0,c.C$)(q))?F&&O&&Z&&"android"===z&&(t=!1):(t=!1,n=!0),t?(e.stopPropagation(),e.preventDefault(),W(!0)):n||(e.stopPropagation(),e.preventDefault(),H({component:14347,element:13582,event_type:3830,view_type:20,view_parameter:3844,aux_data:{upsell_reason:"deep-link-app-upsell-modal"}}),i(Z??(0,y.Z)(q,"android"===z),"deep-link-app-upsell-modal"))}else(0,w.M0)().getItem(l.gm)===A&&!(0,h.Nl)().getItem(o.Gd)&&(e.stopPropagation(),e.preventDefault(),(0,h.Nl)().setItem(o.Gd,1),i(Z,"deep-link-app-upsell-modal",`${window.location.origin}${"string"==typeof U?U:`${U.pathname||""}${U.search?`?${U.search}`:""}`}`),Q());!(t&&r)&&P&&P(e)},children:k})})]})},M=U(({accessibilityLabel:e,children:t,external:n,externalQueryParams:i,features:r,inline:l=!1,newTab:o,nofollow:p,onTouch:s,onBlur:d,onFocus:u,pressState:c,rounding:m,to:_})=>(0,R.jsx)(j,{external:n,externalQueryParams:i,features:r,href:_,target:o?"blank":null,children:({navigate:n})=>(0,R.jsx)(a.rU,{accessibilityLabel:e,display:l?"inlineBlock":"block",href:(0,k.Z)(_),onBlur:d?({event:e})=>d(e):void 0,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),s?.(e),e.defaultPrevented||n(e)},onFocus:u?({event:e})=>u(e):void 0,rel:p?"nofollow":"none",rounding:m,tapStyle:(Array.isArray(c)?c:[c]).includes("compress")?"compress":"none",underline:"none",children:t})})),N=U(x.Z,!0)},577404:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(19963),r=n(967312),a=n(174646),l=n(54368),o=n(869146),p=n(172045),s=n(344184),d=n(857147),u=n(992114);let c="http://play.google.com/store/apps/details?id=com.pinterest",m=["access_token","new_password","new_password_confirm","password","next"],_=(e,t)=>t?(0,d.ru)(e,{invite_code:t}):e,w=(e,t,n)=>{if("ios"===t&&"string"==typeof e&&e.startsWith("discover/article/")){let t=e.split("/")[2];e=`discover_article/${t}/?is_deeplink=1`}return("string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e)?_(e,n):"ios"===t||"ipad"===t?_(e.iOS,n):"android"===t?_(e.android,n):null};var h=n(785893);function f({children:e,invite_code:t}){let{locale:n,isAuthenticated:l,isBot:_,unauthId:h,userAgent:{platform:f,raw:y}}=(0,a.B)(),{logContextEvent:v}=(0,i.u)(),{checkExperiment:g}=(0,r.FJ)();return e(async(e,i,r)=>{v({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:i}}),(({isAuthenticated:e,checkExperiment:t,deeplinkUri:n,fallbackUrl:i,invite_code:r,logContextEvent:a,platform:l,redirectToLite:o,unauthId:_,userAgent:h,app_upsell_type:f,locale:y,isBot:v})=>{if(a?.({component:14347,element:13582,event_type:701,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}}),n){let g=(({deeplinkUri:e,invite_code:t,platform:n,fallbackUrl:i,unauthId:r,app_upsell_type:a})=>({deeplink_path:w(e,n,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:r,utm_source:140,utm_medium:2152,app_upsell_type:a,...i?{af_r:i}:null}))({isAuthenticated:e,deeplinkUri:n,fallbackUrl:i,invite_code:r,platform:l,unauthId:_,userAgent:h,app_upsell_type:f});if((0,u.nP)("mweb.deeplink",{sampleRate:1,tags:{platform:l}}),r&&(0,u.nP)("mweb.deeplink.invite_code",{sampleRate:1}),(0,u.nP)("mweb.deeplink.unauthId",{sampleRate:1,tags:{withUnauthId:!!_}}),o){(0,u.nP)("mweb.deeplink.lite_link",{sampleRate:1}),a?.({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}});let e=(({unauthId:e,app_upsell_type:t})=>({referrer:encodeURI((0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e,app_upsell_type:t}))}))({unauthId:_,app_upsell_type:f});window.location.href=(0,d.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===l){let i=(({deeplinkUri:e,invite_code:t,platform:n,unauthId:i,app_upsell_type:r})=>{let a=JSON.stringify({deeplink_path:w(e,n,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",m),install_id:i});return{referrer:(0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:a,app_upsell_type:r})}})({deeplinkUri:n,invite_code:r,platform:l,unauthId:_,app_upsell_type:f});!v&&!e&&y?.toLowerCase().includes("en-us")&&(()=>{if("undefined"!=typeof window){let e=new URLSearchParams(window.location.search);return e.has("utm_source")&&e.get("utm_source").includes("google_search")}return!1})()&&t&&"enabled"===t("single_tap_unauth_2").group?window.location.href="https://delivers.dtignite.com/v2/delivers/clickAd.jsp?siteId=16686&campaignId=49161&tsti=true&updateApp=false&enablePostInstallAutoLaunch=true&dvURL="+encodeURIComponent("https://app.appsflyer.com/com.pinterest?pid=dtsingletap_int&"+(0,d.XP)({c:"single_tap_unauth",af_c_id:"98888",clickid:(0,p.Z)()})):(0,s.v)()?(0,s.Z)().then(e=>{if(e.length>0){let e=window.location.href.endsWith("/login")?window.location.href.replace("/login","string"==typeof n?n:n.android):window.location.href,t=(0,d.ru)(e,g);a?.({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}}),window.open(t)||a?.({component:14347,element:13582,event_type:702,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}})}else a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}}),window.location.href=(0,d.ru)(c,i)}).catch(()=>{(0,u.nP)("mweb_android.deeplink.playStore.error",{sampleRate:1})}):(a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}}),window.location.href=(0,d.ru)(c,i))}else{if((0,u.nP)("mweb.deeplink.appsflyer_link",{sampleRate:1}),"ios"===l&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal")){window.location.href=(0,d.ru)("https://pinterest.com/pinterest-predicts",g);return}a?.({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:f}}),window.location.href=(0,d.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",g)}}})({isAuthenticated:l,checkExperiment:g,deeplinkUri:e,fallbackUrl:r,invite_code:t,logContextEvent:v,platform:f,redirectToLite:(0,o.Rp)({isBot:_,platform:f,userAgent:y}),unauthId:h,userAgent:y,app_upsell_type:i,locale:n,isBot:_})})}let y=e=>(0,h.jsx)(l.ty,{children:t=>(0,h.jsx)(f,{...e,invite_code:t})});y.displayName="DeepLinkNavigator";let v=y},140852:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(890360);function r(e,t){return"/"===e.pathname?"/":(0,i.am)(e)&&t?`board/${e.pathname.substr(1)}`:e.pathname.substr(1)}},864548:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(545007);let r=()=>(0,i.v9)(({session:{canUseNativeApp:e}})=>e)},859070:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(19963);function r(){let{logContextEvent:e}=(0,i.u)();return{trackAppUpsellDismiss:({appUpsellType:t,viewType:n,viewParameter:i,component:r,element:a})=>{e({event_type:10220,view_type:n??202,view_parameter:i,component:r,element:a,aux_data:{app_upsell_type:t}})}}}},869146:(e,t,n)=>{n.d(t,{G3:()=>u,Rp:()=>d,kp:()=>s});var i=n(547504),r=n(838380),a=n(1794),l=n(943369),o=n(756493);let p=14*a.F4,s=(e,t)=>{let n=function(){let e=Date.now(),t=(0,l.M0)(),n=Number(t.getItem(i.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(i.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,o.Nl)().getItem(r.JO)}}();return e?function(e,t,n){let{currentTime:r,firstUpsellTime:a,lastUpsellTime:o,showedAppUpsellCurrentSession:s}=e;return(n=n||p,!a||r<a+t)?!s:!!(r-o>n)&&((0,l.M0)().removeItem(i.O7),!0)}(n,a.F4):function(e,t){let{currentTime:n,lastUpsellTime:i}=e;return t=t||p,!i||n-i>t}(n,t)},d=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},u=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/70209-3403e2775aea8807.mjs.map